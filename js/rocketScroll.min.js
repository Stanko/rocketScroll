/*
	Written by Stanko
	RocketHelpers - it will become micro library at some point
	http://www.rocketlaunch.me
*/window.getComputedStyle||(window.getComputedStyle=function(e,t){this.el=e;this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;t==="float"&&(t="styleFloat");n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()}));return e.currentStyle[t]?e.currentStyle[t]:null};return this});var RS=RS||{};RS.getScrollTop=function(){if(typeof pageYOffset!="undefined")return pageYOffset;var e=document.body,t=document.documentElement;t=t.clientHeight?t:e;return t.scrollTop};RS.getOffset=function(e){var t=e.target?e.target:e.srcElement,n=0;while(t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop)){n+=t.offsetTop-t.scrollTop;t=t.offsetParent}n=e.clientY+RS.getScrollTop()-n;return n};RS.stopPropagation=function(e){e=e||window.event;if(e.stopPropagation)e.stopPropagation();else{window.event.cancelBubble=!0;window.event.returnValue=!1}};RS.originalOnselectstart=!1;RS.enableSelection=function(e){if(e)window.document.onselectstart=RS.originalOnselectstart;else{RS.originalOnselectstart=window.document.onselectstart;window.document.onselectstart=function(){return!1}}};RS.$=function(e){var t=document.querySelectorAll(e);return t.length===1?t[0]:t};RS.detectTouchScreen=function(){return"ontouchstart"in document.documentElement};RS.detectIE=function(){return document.all?!0:!1};var RS=RS||{};RS.__id=0;RS.RocketScroll=function(e,t){if(RS.detectTouchScreen())return;t=t||!1;t?this.el=e:this.el=RS.$(e);if(typeof this.el.length!="undefined"&&this.el.length>1){this.elements=[];for(var n=0;n<this.el.length;n++)this.elements.push(new RS.RocketScroll(this.el.item(n),!0));this.multiple=!0;return}this.multiple=!1;this.el.id||(this.el.id="rocketScroll"+RS.__id++);this.el.className+=" rocketScroll";this.mouseDown=!1;this.UNSELECTABLE_CLASS=" unselectable";this.buildHTML();this.addScrollbar();this.refresh();this.bindEvents();this.SELECTION_TIMEOUT=!1};RS.RocketScroll.prototype.buildHTML=function(){var e=window.getComputedStyle(this.el,""),t=e.getPropertyValue("padding-top")+" "+e.getPropertyValue("padding-right")+" "+e.getPropertyValue("padding-bottom")+" "+e.getPropertyValue("padding-left");console.log(this.el,e);this.scrollDiv=document.createElement("div");this.scrollDiv.style.width=this.el.clientWidth+50+"px";this.scrollDiv.className+=" scrollDiv";this.contentDiv=document.createElement("div");this.contentDiv.className+=" scrollContent";this.contentDiv.style.padding=t;this.contentDiv.style.width=this.el.clientWidth+"px";var n=RS.$("#"+this.el.id+" .rocketCopyThisContent");n.length!==0?this.contentDiv.appendChild(n):this.contentDiv.innerHTML=this.el.innerHTML;this.el.innerHTML="";this.el.style.padding=0;this.scrollDiv.appendChild(this.contentDiv);this.el.appendChild(this.scrollDiv);this.refreshImages()};RS.RocketScroll.prototype.addScrollbar=function(){this.handle=document.createElement("div");this.scrollbar=document.createElement("div");this.scrollbar.className+=" scrollbar";this.scrollbar.appendChild(this.handle);this.el.appendChild(this.scrollbar)};RS.RocketScroll.prototype.bindEvents=function(){var e=this;this.scrollDiv.onscroll=function(){e.handle.style.marginTop=e.ratio*this.scrollTop+"px"};this.handle.onclick=function(e){RS.stopPropagation(e)};this.handle.onmousedown=function(t){t=t||window.event;RS.stopPropagation(t);e.contentDiv.className+=e.UNSELECTABLE_CLASS;RS.enableSelection(!1);e.clientY=t.clientY;e.scrollTop=e.scrollDiv.scrollTop;e.mouseDown=!0};this.el.onmouseup=function(){e.setMouseUpAndEnableSelection(e)};RS.detectIE()?this.el.onmouseleave=function(){e.setMouseUpAndEnableSelection(e)}:this.el.onmouseout=function(t){var n=t.relatedTarget;while(n){if(n==this)return;n=n.parentNode}e.setMouseUpAndEnableSelection(e)};this.el.onmousemove=function(t){if(!e.mouseDown)return;t=t||window.event;e.scrollDiv.scrollTop=(t.clientY-e.clientY)/e.ratio+e.scrollTop};this.scrollbar.onclick=function(t){t=t||window.event;RS.stopPropagation(t);var n=RS.getOffset(t)-e.handle.clientHeight/2;e.scrollDiv.scrollTop=n/e.totalHandle*e.totalScrollable};this.el.onscroll=function(t){t.preventDefault();e.el.scrollLeft=0}};RS.RocketScroll.prototype.setMouseUpAndEnableSelection=function(e){e.contentDiv.className=e.contentDiv.className.replace(e.UNSELECTABLE_CLASS,"");e.mouseDown=!1;clearTimeout(e.SELECTION_TIMEOUT);e.SELECTION_TIMEOUT=setTimeout(function(){RS.enableSelection(!0)},500)};RS.RocketScroll.prototype.refresh=function(e){e=e||!1;if(this.multiple){for(var t in this.elements)this.elements[t].refresh();return}this.scrollDiv.clientHeight>this.contentDiv.clientHeight?this.scrollbar.style.display="none":this.scrollbar.style.display="block";this.handle.style.height=this.scrollDiv.clientHeight*(this.scrollDiv.clientHeight/this.contentDiv.clientHeight)+"px";this.totalScrollable=this.contentDiv.clientHeight-this.scrollDiv.clientHeight;this.totalHandle=this.scrollbar.clientHeight-this.handle.clientHeight;this.ratio=this.totalHandle/this.totalScrollable;this.handle.style.marginTop=this.ratio*this.scrollDiv.scrollTop+"px";e&&this.refreshImages()};RS.RocketScroll.prototype.refreshImages=function(){var e=RS.$("#"+this.el.id+" .scrollContent img");if(e.length>0){var t=this;for(var n=0;n<e.length;n++)e.item(n).onload=function(){t.refresh();this.onload=null}}};RS.RocketScroll.prototype.updateContent=function(e){if(this.multiple){for(var t in this.elements){this.elements[t].contentDiv.innerHTML=e;this.elements[t].refresh()}return}this.contentDiv.innerHTML=e;this.refresh();this.refreshImages()};